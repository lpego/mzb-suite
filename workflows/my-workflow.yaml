# === Welcome to the template Renku Workflow file! ===
# You can use this file to encode in what order your data processing steps should be run,
# making it easier for you to run your workflow, and for others to understand it!

# === How to use this template ===
# Replace the script and data paths in the template below to match your analysis commands. 
# Then, run `renku run my-workflow.yaml` in a terminal to execute the workflow!
# If you are working in a notebook, run `! renku run my-workflow.yaml` in a notebook cell. 

# === Docs ===
# To learn much more about what you can do with the Renku Workflow File, see our docs:
# https://renku.readthedocs.io/en/stable/topic-guides/workflows/workflow-file.html

name: mzb-wflow
root: /data/shared/mzb-workflow
steps:
  raw-image-to-clips:
    command: python $my-script $input-data $output-data $save_mask
    inputs:
      - my-script:
          path: scripts/image_parsing/main_raw_to_clips.py 
      - input-data:
          path: $root /data/raw/project_portable_flume
    outputs:
      - output-data:
          path: $root /data/results/project_portable_flume/blobs/
    parameters:
      - save_mask: 
          prefix: --save_full_mask_dir
          value: =$root /data/results/project_portable_flume/full_image_masks
      - config_file:
          prefix: --config_file
          value: $root /configs/configuration_flume_datasets.yaml

  # === Adding more steps ===
  # You can add as many steps as you want to your workflow by copy and pasting the step template above
  # TIP: To run just one step from a workflow, simply add the step name to the command, like this:
  #   `renku run my-workflow.yaml make-plot`
  # make-plot:
    # command: python $another-script $output-data $my-plot
    # ...


